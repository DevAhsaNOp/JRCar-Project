@model JRCar.BOL.Validation_Classes.ValidationUserAds

@{
    Layout = null;
}

@if (User.Identity.IsAuthenticated && (User.IsInRole("User") || User.IsInRole("Showroom")))
{
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>AutoMobile</title>
        <link href="~/Files/css/bootstrap.css" rel="stylesheet">
        <link href="~/Files/css/bootstrap-theme.css" rel="stylesheet">
        <link href="~/Files/css/iconmoon.css" rel="stylesheet">
        <link href="~/Files/css/chosen.css" rel="stylesheet">
        <link href="~/style.css" rel="stylesheet">
        <link href="~/Files/css/bootstrap-slider.css" rel="stylesheet">
        <link href="~/cs-automobile-plugin.css" rel="stylesheet">
        <link href="~/Files/css/color.css" rel="stylesheet">
        <link href="~/Files/css/widget.css" rel="stylesheet">
        <link href="~/Files/css/responsive.css" rel="stylesheet">
        <script src="~/Files/scripts/jquery.js"></script>
        <script src="~/Files/scripts/modernizr.js"></script>
        <script src="~/Files/scripts/bootstrap.min.js"></script>
        <!-- SweetAlert2 -->
        <link rel="stylesheet" href="~/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css">
        <script src="~/plugins/sweetalert2/sweetalert2.min.js"></script>
        <style>
            .single-page .cs-banner ul.cs-banner-slider li .cs-media figure img {
                height: 50vh !important;
            }

            .single-page .auto-overview ul li .auto-text strong {
                font-size: 13px !important;
                line-height: 20px !important;
                font-weight: 800 !important;
            }

            .gm-ui-hover-effect {
                display: none !important;
            }

            .owner-detail-head {
                text-align: center !important;
                font-size: 18px !important;
                font-weight: 600 !important;
                border-bottom: 1px solid #d5d5d5 !important;
                padding-bottom: 10px !important;
                margin-bottom: 10px !important;
            }

            .modal-open .modal {
                overflow-x: auto;
                overflow-y: auto;
            }

            input[type="datetime-local"], input[type="time"] {
                font-size: 14px;
                color: #cacaca;
                border: none;
                padding: 0;
                border-radius: 0;
                height: 16px;
                position: relative;
                top: -5px;
            }

                input[type="datetime-local"]::-webkit-calendar-picker-indicator, input[type="time"]::-webkit-calendar-picker-indicator {
                    cursor: pointer;
                    border-radius: 4px;
                    font-size: 18px;
                    margin-right: 2px;
                    opacity: 1;
                    filter: invert(0.55);
                }
        </style>
        <script>
        function fnAuthorize() {
            var userAuthorized = @User.Identity.IsAuthenticated.ToString().ToLower();
            var Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 5000
            });
            if (userAuthorized) {
            }
            else {
                $('#schedule-test-drive').modal('hide');
                Toast.fire({
                    title: '<span style="font-size:10px;line-height:10px;text-transform: capitalize;text-align:center">Please Sign In. Before Scheduling an appointment!</span>',
                    footer: '<a href="/Account/SignIn" style="font-size:14px;" class="btn btn-danger">Sign In</a>'
                })
                return false;
            }
        }

        function fnSuccess(data) {
            $('#schedule-test-drive').modal('hide');
            $('#schedule-test-drive').find('form').trigger('reset');
            var Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 5000
            });

            if (data) {
                Toast.fire({
                    icon: 'success',
                    title: '<span style="font-size:10px;line-height:10px;text-transform: capitalize;text-align:center">Appointment request has been sent Succesfully!</span>',
                });
            }
            else {
                Toast.fire({
                    icon: 'error',
                    title: '<span style="font-size:10px;line-height:10px;text-transform: capitalize;text-align:center">Something went wrong. Please try again Later!</span>',
                })
            }
            setTimeout(function () {
                location.reload(true);
            }, 5000);
        }
        </script>
    </head>
    <body class="wp-automobile single-page">
        <div class="wrapper">
            <!-- Header Start -->
            @Html.Partial("_WebHeader")
            <!-- Header End -->
            <!-- Single - Page Slider Start -->
            <div class="cs-banner loader">
                <ul class="cs-banner-slider">
                    @foreach (var item in ViewBag.Images)
                    {
                        <li>
                            <div class="cs-media">
                                <figure><img src="~/uploads/@item" alt="" /></figure>
                            </div>
                        </li>
                    }
                </ul>
                <div class="container">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 pull-right">
                            <div class="cs-button-style">
                                <a class="btn-video" href="#"><i class="icon-play_arrow"></i> Watch video</a>
                                @*<a class="btn-compare" href="#"><i class="icon-flow-tree"></i> Compare</a>*@
                                <a class="btn-shortlist" href="#"><i class="icon-heart-o"></i> shortlist</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Single - Page Slider End -->
            <!-- Main Start -->
            <div class="main-section">
                <div class="page-section" style="box-shadow: 0 2px 3px -2px rgba(0,0,0,0.4);position:relative;">
                    <div class="container">
                        <div class="row">
                            <div class="custom-content col-lg-9 col-md-9 col-sm-12 col-xs-12">
                                <div class="page-section">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="car-detail-heading">
                                                <div class="auto-text">
                                                    <h2>@Html.DisplayFor(model => model.Title)</h2>
                                                    <span><i class="icon-building-o"></i> @Html.DisplayFor(model => model.State)</span>
                                                    <address id="ELocated"><i class="icon-location"></i>@Html.DisplayFor(model => model.Area), @Html.DisplayFor(model => model.City)</address>
                                                </div>
                                                <div class="auto-price"><span class="cs-color" id="RPrice">Rs @string.Format("{0:n0}", Convert.ToDecimal(Model.Price))</span> <em id="DollarPrice"></em></div>
                                            </div>
                                        </div>
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                            <div class="cs-detail-nav">
                                                <ul>
                                                    <li><a class="active" href="#vehicle">Vehicle overview</a></li>
                                                    <li><a href="#location">Location</a></li>
                                                    <li><a href="#contact">Contact Us</a></li>
                                                </ul>
                                                <div class="detail-btn">
                                                    <div class="cs-button-style">
                                                        <a class="btn-compare" href="#"><i class="icon-flow-tree"></i> Compare</a>
                                                        <a class="btn-shortlist" href="#"><i class="icon-heart-o"></i> shortlist</a>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="on-scroll">
                                                <div id="vehicle" class="auto-overview detail-content">
                                                    <ul class="row">
                                                        <li class="col-lg-3 col-md-3 col-sm-6 col-xs-6">
                                                            <div class="cs-media">
                                                                <figure><i class="icon-calendar-check-o cs-color"></i></figure>
                                                            </div>
                                                            <div class="auto-text">
                                                                <span>Year</span>
                                                                <strong>@Html.DisplayFor(model => model.Year)</strong>
                                                            </div>
                                                        </li>
                                                        <li class="col-lg-3 col-md-3 col-sm-6 col-xs-6" style="text-align: left !important">
                                                            <div class="cs-media">
                                                                <figure><i class="icon-driving2 cs-color"></i></figure>
                                                            </div>
                                                            <div class="auto-text">
                                                                <span>CONDITION</span>
                                                                <strong>@Html.DisplayFor(model => model.Condition)</strong>
                                                            </div>
                                                        </li>
                                                        <li class="col-lg-5 col-md-5 col-sm-6 col-xs-6" style="text-align: left !important; border: 0 !important;">
                                                            <div class="cs-media">
                                                                <figure><i class="icon-engine cs-color"></i></figure>
                                                            </div>
                                                            <div class="auto-text">
                                                                <span>make Model</span>
                                                                <strong>@Html.DisplayFor(model => model.Model)</strong>
                                                            </div>
                                                        </li>
                                                        <li class="col-lg-1 col-md-1 col-sm-6 col-xs-6" style="text-align: left !important">
                                                            @*<div class="cs-media">
                                                                    <figure><i class="icon-gas20 cs-color"></i></figure>
                                                                </div>
                                                                <div class="auto-text">
                                                                    <span>Fuel Type</span>
                                                                    <strong>Hybrid</strong>
                                                                </div>*@
                                                        </li>
                                                    </ul>
                                                    <p class="more-text" style="text-align:left !important">
                                                        @Html.DisplayFor(model => model.Description)
                                                    </p>
                                                </div>
                                                <div id="contact" class="cs-contact-form detail-content">
                                                    <div class="section-title">
                                                        <h4 style="text-align:left;">Contact Us</h4>
                                                    </div>
                                                    <form>
                                                        <input type="text" placeholder="Full Name">
                                                        <input type="email" placeholder="Email Address">
                                                        <input type="text" placeholder="Phone Number">
                                                        <textarea placeholder="Your Message"></textarea>
                                                        <input type="submit" value="submit" class="cs-bgcolor">
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <aside class="page-sidebar col-lg-3 col-md-3 col-sm-12 col-xs-12">
                                <div class="cs-category-link-icon">
                                    <ul>
                                        <li><a data-toggle="modal" href="javascript:void(0)" data-target="#schedule-test-drive"><i class="cs-color icon-car"></i>Schedule Appointment</a></li>
                                        <li><a href="~/Files/extra-images/pdf-sample.pdf" download><i class="cs-color icon-print3"></i>Print this Detail</a></li>
                                    </ul>
                                    <div class="cs-form-modal">
                                        <div class="modal fade" id="schedule-test-drive" tabindex="-1" role="dialog">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <h4>Schedule Appointment</h4>
                                                        <div class="cs-login-form">
                                                            @using (Ajax.BeginForm("ScheduleAppointment", "Website", new AjaxOptions
                                                            {
                                                                HttpMethod = "POST",
                                                                OnBegin = "fnAuthorize",
                                                                OnSuccess = "fnSuccess"
                                                            }, htmlAttributes: new { @class = "row" }))
                                                            {
                                                                <div class="col-lg-12 col-lg-12 col-sm-12 col-xs-12">
                                                                    <div class="cs-modal-field">
                                                                        <label for="cs-email-4">
                                                                            <strong>Email</strong>
                                                                            <i class="icon-envelope"></i>
                                                                            <input type="email" id="cs-email-4" title="Email is not in correct format. e.g. abc@mail.com" style="color: darkslategray;" placeholder="Type your email" name="useremail">
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-lg-12 col-sm-12 col-xs-12">
                                                                    <div class="cs-modal-field">
                                                                        <label for="phone-1">
                                                                            <strong>Phone</strong>
                                                                            <i class="icon-iphone26"></i>
                                                                            <input type="tel" style="color: darkslategray;" title="Phone Number is not in correct format. e.g. 0331 2345678" pattern="03[0-9]{2}(?!1234567)(?!1111111)(?!7654321)[0-9]{7}" id="phone-1" placeholder="+92 331 23 456 78" required name="userphone">
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-lg-12 col-sm-12 col-xs-12">
                                                                    <div class="cs-modal-field">
                                                                        <label for="best-time-1">
                                                                            <strong>Best Datetime</strong>
                                                                            @*<i class="icon-calendar"></i>*@
                                                                            <input type="datetime-local" id="best-date-1" style="color: darkslategray;" placeholder="Select date" required name="selecteddatetime">
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-lg-12 col-sm-12 col-xs-12">
                                                                    <div class="cs-modal-field">
                                                                        <label>
                                                                            <textarea required placeholder="Purpose to Visit" style="color: darkslategray;" name="purpose"></textarea>
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-12 col-lg-12 col-sm-12 col-xs-12">
                                                                    <div class="cs-modal-field">
                                                                        <input class="cs-color csborder-color" type="submit" value="Submit Query">
                                                                    </div>
                                                                </div>
                                                            }
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="auto-detail-filter">
                                    <div class="owner-detail-head">Seller Information</div>
                                    <div class="element-title" style="text-align:center !important;">
                                        <img src="@Url.Content(Model.UserImage.ToString())" alt="Person Image" style="width: 70px !important; height: 70px !important; border-radius: 50% !important; margin-bottom: 10px !important;" />
                                        <h6 style="user-select: none !important; margin: 0 !important;">@Model.UserName</h6>
                                        <h6 style="user-select: none !important; margin: 0 !important; font-size: 11px !important; font-family: 'Roboto' !important;">Member since: @Model.UserCreatedOn.ToString("MMM d, yyyy")</h6>
                                        <h6 style="font-size: 13px !important; font-family: 'Roboto' !important;font-weight:600 !important;" id="PhoneNumber"></h6>
                                        <input type="button" name="Number" id="btnShow" style="border-radius: 2px !important;" value="Show Phone Number" class="btn btn-success" />
                                    </div>
                                </div>
                            </aside>
                        </div>
                    </div>
                </div>
                <div class="page-section" style="margin-bottom:50px">
                    <div id="location" class="cs-map loader maps">
                    </div>
                </div>
                <div class="page-section" style="margin-bottom:30px;">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div style="text-align:left;" class="cs-section-title">
                                    <h3>Related Cars</h3>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <div class="auto-listing auto-grid">
                                    <div class="cs-media">
                                        <figure>
                                            <img src="~/Files/extra-images/listing-Grid-img1.jpg" alt="#" />
                                        </figure>
                                    </div>
                                    <div class="auto-text">
                                        <span class="cs-categories"><a href="#">Timlers Motors</a></span>
                                        <div class="post-title">
                                            <h6><a href="#">Mazda CX-5 SX, V6, ABS, Sunroof </a></h6>
                                            <div class="auto-price"><span class="cs-color">$25,000</span> <em>MSRP $27,000</em></div>
                                        </div>
                                        <div class="btn-list">
                                            <a href="javascript:void(0)" class="btn btn-danger collapsed" data-toggle="collapse" data-target="#list-view"></a><div id="list-view" class="collapse">
                                                <ul>
                                                    <li>30/36 est. mpg 18</li>
                                                    <li>Black front grille with chrome accent</li>
                                                    <li>Cruise control</li>
                                                    <li>Remote keyless entry system</li>
                                                    <li>Tilt 3-spoke steering wheel with audio controls</li>
                                                    <li>15-in. alloy wheels</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="cs-checkbox">
                                            <input type="checkbox" name="list" value="check-listn" id="check-list">
                                            <label for="check-list">Compare</label>
                                        </div>
                                        <a href="#" class="View-btn">View Detail<i class=" icon-arrow-long-right"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <div class="auto-listing auto-grid">
                                    <div class="cs-media">
                                        <figure> <img src="~/Files/extra-images/listing-Grid-img2.jpg" alt="#" /></figure>
                                    </div>
                                    <div class="auto-text">
                                        <span class="cs-categories"><a href="#">Timlers Motors</a></span>
                                        <div class="post-title">
                                            <h6><a href="#">Mazda CX-5 SX, V6, ABS, Sunroof </a></h6>
                                            <div class="auto-price"><span class="cs-color">$25,000</span> <em>MSRP $27,000</em></div>
                                        </div>
                                        <div class="btn-list">
                                            <a href="javascript:void(0)" class="btn btn-danger collapsed" data-toggle="collapse" data-target="#list-view1"></a><div id="list-view1" class="collapse">
                                                <ul>
                                                    <li>30/36 est. mpg 18</li>
                                                    <li>Black front grille with chrome accent</li>
                                                    <li>Cruise control</li>
                                                    <li>Remote keyless entry system</li>
                                                    <li>Tilt 3-spoke steering wheel with audio controls</li>
                                                    <li>15-in. alloy wheels</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="cs-checkbox">
                                            <input type="checkbox" name="list" value="check-listn" id="check-list1">
                                            <label for="check-list1">Compare</label>
                                        </div>
                                        <a href="#" class="View-btn">View Detail<i class=" icon-arrow-long-right"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <div class="auto-listing auto-grid">
                                    <div class="cs-media">
                                        <figure> <img src="~/Files/extra-images/listing-Grid-img3.jpg" alt="#" /></figure>
                                    </div>
                                    <div class="auto-text">
                                        <span class="cs-categories"><a href="#">Timlers Motors</a></span>
                                        <div class="post-title">
                                            <h6><a href="#">Mazda CX-5 SX, V6, ABS, Sunroof </a></h6>
                                            <div class="auto-price"><span class="cs-color">$25,000</span> <em>MSRP $27,000</em></div>
                                        </div>
                                        <div class="btn-list">
                                            <a href="javascript:void(0)" class="btn btn-danger collapsed" data-toggle="collapse" data-target="#list-view2"></a><div id="list-view2" class="collapse">
                                                <ul>
                                                    <li>30/36 est. mpg 18</li>
                                                    <li>Black front grille with chrome accent</li>
                                                    <li>Cruise control</li>
                                                    <li>Remote keyless entry system</li>
                                                    <li>Tilt 3-spoke steering wheel with audio controls</li>
                                                    <li>15-in. alloy wheels</li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="cs-checkbox">
                                            <input type="checkbox" name="list" value="check-listn" id="check-list2">
                                            <label for="check-list2">Compare</label>
                                        </div>
                                        <a href="#" class="View-btn">View Detail<i class=" icon-arrow-long-right"></i></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <div class="auto-listing auto-grid">
                                    <div class="cs-media">
                                        <figure> <img src="~/Files/extra-images/listing-Grid-img4.jpg" alt="#" /></figure>
                                    </div>
                                    <div class="auto-text">
                                        <span class="cs-categories"><a href="#">Timlers Motors</a></span>
                                        <div class="post-title">
                                            <h6><a href="#">Mazda CX-5 SX, V6, ABS, Sunroof </a></h6>
                                            <div class="auto-price"><span class="cs-color">$25,000</span> <em>MSRP $27,000</em></div>
                                        </div>
                                        <div class="cs-checkbox">
                                            <input type="checkbox" name="list" value="check-listn" id="check-list3">
                                            <label for="check-list3">Compare</label>
                                        </div>
                                        <a href="#" class="View-btn">View Detail<i class=" icon-arrow-long-right"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="page-section" style="background:#19171a;">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                <div class="cs-ad" style="text-align:center; padding:55px 0 32px;">
                                    <div class="cs-media">
                                        <figure>
                                            <img src="~/Files/extra-images/cs-ad-img.jpg" alt="" />
                                        </figure>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Main End -->
            <!-- Footer Start -->
            @Html.Partial("_WebFooter")
            <!-- Footer End -->
        </div>

        <script src="~/Files/scripts/responsive.menu.js"></script>
        <script src="~/Files/scripts/chosen.select.js"></script>
        <script src="~/Files/scripts/slick.js"></script>
        <script src="~/Files/scripts/bootstrap-slider.js"></script>
        <script src="~/Files/scripts/echo.js"></script>
        <script src="~/scripts/jquery.unobtrusive-ajax.min.js"></script>
        <!-- Put all Functions in functions.js -->
        <script src="~/Files/scripts/functions.js"></script>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3x0O6BzuvZIQIoypSGe4uAcocdABrL2I&sensor=false"></script>
        <script>
        $(document).ready(function () {
            setInterval(function () {
                $('.slick-next').click();
            }, 3000);

            setInterval(function () {
                AppntupdateNotificationCount();
            }, 1000);

            AppntupdateNotification();
            AppntGetCount();
            AppntupdateNotificationCount();

            $('a.Appntnoti').click(function (e) {
                e.stopPropagation();
                var count = 0;
                count = parseInt($('span.Appntcount').html()) || 0;

                //Only load Appntnotification if not already loaded
                if (count > 0) {
                    AppntupdateNotification();
                    sessionStorage.setItem("Appntcount", 0);
                    $('.Appntnoti-content').show();
                    AppntupdateNotificationRead();
                }
                else if ($('.Appntnoti-content').css('display') == 'block') {
                    $('.Appntnoti-content').hide();
                }
                else if ($('.Appntnoti-content').css('display') == 'none') {
                    $('.Appntnoti-content').show();
                    //AppntupdateNotificationRead();
                }
                $('span.Appntcount', this).html('');
            })

            // Hide Appntnotifications
            $('html').click(function () {
                $('.Appntnoti-content').hide();
            })

            // Notifications Change to Read When NotiFication Icon Press
            function AppntupdateNotificationRead() {
                $.ajax({
                    type: 'GET',
                    url: '/Website/ChangeUserAppointmentsToAsRead',
                    success: function (response) {
                        sessionStorage.setItem("Appntcount", 0);
                    },
                    error: function (error) {
                        console.log(error);
                    }
                })
            }

            function AppntGetCount() {
                var count = sessionStorage.getItem("Appntcount");

                if (count > 0) {
                    $('span.Appntcount').html(count);
                }
                else {
                    $('span.Appntcount', this).html('');
                }
            }

            // Update Appntnotification
            function AppntupdateNotification() {
                $('#AppntnotiContent').empty();
                $('#AppntnotiContent').append($('<li>Loading...</li>'));
                $.ajax({
                    type: 'GET',
                    url: '/Website/GetUserAppointmentsList',
                    success: function (response) {
                        $('#AppntnotiContent').empty();
                        if (response.length == 0) {
                            $('#AppntnotiContent').append($('<a href="#" class="dropdown-item"><i class="icon-envelope" style="padding-right: 5px;"></i> No Notification Available</a>'));
                        }
                        $.each(response, function (index, value) {
                            console.log("IsAccepted :" + value.IsAccpeted);
                            if (value.IsAccpeted) {
                                $('#AppntnotiContent').append($('<span href="#" class="dropdown-item" style="white-space: pre-line;"> <i class="icon-envelope" style="padding-right: 5px;"></i> Appointment Appected By ' + value.Title + ' of ' + value.Description + '<span style="display:flex;align-items:center;justify-content: space-evenly;"><span class="btn btn-sm btn-info" style="padding: 0.25rem 4rem !important;" onclick="AppntDetls(' + value.AdURL + ')">View Details</span></span></span>'));
                            }
                            else {
                                $('#AppntnotiContent').append($('<span href="#" class="dropdown-item" style="white-space: pre-line;"> <i class="icon-envelope" style="padding-right: 5px;"></i> Appointment Reject By ' + value.Title + ' of ' + value.Description + '<span style="display:flex;align-items:center;justify-content: space-evenly;"><span class="btn btn-sm btn-info" style="padding: 0.25rem 4rem !important;" onclick="AppntDetls(' + value.AdURL + ')">View Details</span></span></span>'));
                            }
                        });
                    },
                    error: function (error) {
                        console.log(error);
                    }
                })
            }

            // Update Appntnotification count
            function AppntupdateNotificationCount() {
                var count = 0;
                $.ajax({
                    type: 'GET',
                    url: '/Website/GetUserAppointmentsListCount',
                    success: function (response) {
                        count = response;
                        if (count > 0) {
                            $('span.Appntcount').html(count);
                        }
                        else {
                            $('span.Appntcount').html('');
                        }
                        sessionStorage.setItem("Appntcount", count);
                    },
                    error: function (error) {
                        console.log(error);
                    }
                })
            }

            const currentTimezoneOffset = 8; // UTC+8:00 timezone, change it

            Date.prototype.yyyymmdd = function () {
                return [
                    this.getFullYear(),
                    (this.getMonth() + 1).toString().padStart(2, '0'), // getMonth() is zero-based
                    this.getDate().toString().padStart(2, '0')
                ].join('-');
            };

            function getTodayDateStr() {
                const d = new Date();
                // console.log(d);
                const d2 = new Date(d.getTime() + (d.getTimezoneOffset() + currentTimezoneOffset * 60) * 60 * 1000);
                // console.log(d2, d2.yyyymmdd());
                return d2.yyyymmdd();
            }

            var amount = document.getElementById("RPrice").textContent.replace(/\D/g, "");
            console.log(amount);
            var settings = {
                "url": "http://api.exchangerate.host/convert?from=PKR&to=USD&amount=" + amount + "&date=" + getTodayDateStr(),
                "method": "GET",
                "timeout": 0,
            };

            $.ajax(settings).done(function (response) {
                console.log(response);
                document.getElementById("DollarPrice").textContent = "$" + response.result.toFixed(2);
            });

            $("#btnShow").click(function (e) {
                var userAuthorized = @User.Identity.IsAuthenticated.ToString().ToLower();
                var Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 5000
                });
                if (userAuthorized) {
                    $("#PhoneNumber").html("Phone Number: 0" + @Model.Number);
                    $("#btnShow").hide();
                }
                else {
                    $('#schedule-test-drive').modal('hide');
                    Toast.fire({
                        title: '<span style="font-size:10px;line-height:10px;text-transform: capitalize;text-align:center">Please Sign In. Before View a Number!</span>',
                        footer: '<a href="/Account/SignIn" style="font-size:14px;" class="btn btn-danger">Sign In</a>'
                    })
                    return false;
                }
            });

            success();

            function success() {
                var lat = @Model.Latitude;
                var long = @Model.Longitude;
                var area = $("#ELocated")[0].innerText;
                var myLatlng = new google.maps.LatLng(lat, long);

                var myOptions = {
                    center: myLatlng,
                    zoom: 15,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };

                var map = new google.maps.Map(document.getElementById("location"), myOptions);
                var marker = new google.maps.Marker({
                    position: myLatlng,
                    title: "lat: " + lat + " long: " + long
                });

                marker.setMap(map);
                var infowindow = new google.maps.InfoWindow({ content: "<b>Address Location: </b>" + area +"" });
                infowindow.open(map, marker);
            }
        })
        </script>
    </body>

</html>
}